<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title><hanC/></title><link>https://dangpangch.github.io/</link><description>Recent content on<hanC/></description><generator>Hugo</generator><language>zh-cn</language><lastBuildDate>Mon, 15 Sep 2025 15:29:25 +0800</lastBuildDate><atom:link href="https://dangpangch.github.io/rss.xml" rel="self" type="application/rss+xml"/><item><title>Golang/Context</title><link>https://dangpangch.github.io/posts/golang/context/</link><pubDate>Mon, 15 Sep 2025 15:29:25 +0800</pubDate><guid>https://dangpangch.github.io/posts/golang/context/</guid><description>&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;Context&lt;/code&gt; 是&lt;strong&gt;Go&lt;/strong&gt;语言于&lt;strong&gt;v1.7&lt;/strong&gt;引入，用于在&lt;code&gt;goroutine&lt;/code&gt;中传递截止时间、取消信号和其他请求范围值的标准库，也是Go语言的一个特殊机制.&lt;/p&gt;&lt;/blockquote&gt;
&lt;h2 id="为什么需要-context-"&gt;为什么需要 Context ？&lt;/h2&gt;
&lt;p&gt;在经典的网络服务器中，每个传入的请求都在一个单独的&lt;code&gt;goroutine&lt;/code&gt;中处理，这里处理过程可能涉及到多个下游调用，例如访问数据库、调用 RPC 服务等，这时会面临几个问题：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;请求取消&lt;/strong&gt;：如果客户端连接关闭或者请求超时，那么需要关闭所有相关的 &lt;code&gt;goroutine&lt;/code&gt; ，避免资源浪费.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;超时控制&lt;/strong&gt;：某些操作需要明确的执行时间，超过该时间该停止，并返回超时错误.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;数据传递&lt;/strong&gt;：在整个请求链中，共享一些数据（例如：user_id, trace_id&amp;hellip;），需要一种安全的方式将共享的数据传递到各个函数，同时不污染函数签名.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;code&gt;context.Context&lt;/code&gt; 正是为了优雅解决这些问题，提供了一个在 API 边界之间和 &lt;code&gt;goroutine&lt;/code&gt; 之间传递“元数据”的标准方式.&lt;/p&gt;
&lt;h2 id="context-的核心原理"&gt;Context 的核心原理&lt;/h2&gt;
&lt;h3 id="context-接口"&gt;Context 接口&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;context&lt;/code&gt; 包的核心是 &lt;code&gt;Context&lt;/code&gt; 接口，它定义了四个方法：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-go" data-lang="go"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#c678dd"&gt;type&lt;/span&gt; &lt;span style="color:#e06c75"&gt;Context&lt;/span&gt; &lt;span style="color:#c678dd"&gt;interface&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#7f848e"&gt;// Deadline 返回一个时间点，当到达该时间点后，Context 将被自动取消。&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#7f848e"&gt;// 如果没有设置 Deadline，ok 将返回 false。&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#61afef;font-weight:bold"&gt;Deadline&lt;/span&gt;() (&lt;span style="color:#e06c75"&gt;deadline&lt;/span&gt; &lt;span style="color:#e06c75"&gt;time&lt;/span&gt;.&lt;span style="color:#e06c75"&gt;Time&lt;/span&gt;, &lt;span style="color:#e06c75"&gt;ok&lt;/span&gt; &lt;span style="color:#e5c07b"&gt;bool&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#7f848e"&gt;// Done 返回一个 channel。当 Context 被取消或超时时，该 channel 会被关闭。&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#7f848e"&gt;// 如果 Context 不可取消，Done() 可能返回 nil。&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#61afef;font-weight:bold"&gt;Done&lt;/span&gt;() &lt;span style="color:#56b6c2"&gt;&amp;lt;-&lt;/span&gt;&lt;span style="color:#c678dd"&gt;chan&lt;/span&gt; &lt;span style="color:#c678dd"&gt;struct&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#7f848e"&gt;// Err 在 Done() channel 关闭后，返回 Context 被取消的原因。&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#7f848e"&gt;// 如果 Context 未被取消，返回 nil。&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#7f848e"&gt;// 常见原因为 context.Canceled 和 context.DeadlineExceeded。&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#61afef;font-weight:bold"&gt;Err&lt;/span&gt;() &lt;span style="color:#e5c07b"&gt;error&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#7f848e"&gt;// Value 返回与该 Context 关联的键（key）对应的值（value）。&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#7f848e"&gt;// 主要用于在请求处理链中传递请求范围的数据。&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#61afef;font-weight:bold"&gt;Value&lt;/span&gt;(&lt;span style="color:#e06c75"&gt;key&lt;/span&gt; &lt;span style="color:#e5c07b"&gt;any&lt;/span&gt;) &lt;span style="color:#e5c07b"&gt;any&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="context-树状结构和传播机制"&gt;Context 树状结构和传播机制&lt;/h3&gt;
&lt;p&gt;Go 中的 &lt;code&gt;Context&lt;/code&gt; 具有&lt;strong&gt;继承关系&lt;/strong&gt;，可以形成一棵树状结构。当你基于一个父 &lt;code&gt;Context&lt;/code&gt; 创建一个子 &lt;code&gt;Context&lt;/code&gt; 时，它们之间就建立了关联.&lt;/p&gt;</description></item><item><title>Recommand Resource</title><link>https://dangpangch.github.io/recommand/</link><pubDate>Tue, 13 May 2025 19:32:24 +0800</pubDate><guid>https://dangpangch.github.io/recommand/</guid><description>&lt;blockquote&gt;
&lt;p&gt;该页面主要收集一些好用的资源，包括但不限于：学习资料、工具以及开源项目等.&lt;/p&gt;&lt;/blockquote&gt;



&lt;div class="toc-wrapper"&gt;
 &lt;div class="toc-header"&gt;
 &lt;h2&gt;目录&lt;/h2&gt;
 &lt;/div&gt;
 &lt;div class="toc-content"&gt;
 &lt;nav id="TableOfContents"&gt;
 &lt;ul&gt;
 &lt;li&gt;&lt;a href="#programming-language-learning"&gt;Programming Language Learning&lt;/a&gt;&lt;/li&gt;
 &lt;li&gt;&lt;a href="#website"&gt;Website&lt;/a&gt;&lt;/li&gt;
 &lt;li&gt;&lt;a href="#github-repository"&gt;Github Repository&lt;/a&gt;&lt;/li&gt;
 &lt;li&gt;&lt;a href="#tool"&gt;Tool&lt;/a&gt;&lt;/li&gt;
 &lt;/ul&gt;
&lt;/nav&gt;
 &lt;/div&gt;
&lt;/div&gt;


&lt;style&gt;
.toc-wrapper {
 margin: 1.5rem 0;
 padding: .5rem 1rem;
 background-color: var(--body-background-color);
 border: 1px var(--dim-color) solid;
 border-radius: 5px;
 font-family: var(--font-family-content);
 font-weight: var(--font-weight-content);
}

.toc-header {
 display: flex;
 justify-content: space-between;
 align-items: center;
 margin-bottom: .5rem;
 padding-bottom: 0.5rem;
 border-bottom: 1px var(--dim-color) solid;
}

.toc-header h2 {
 margin: 0;
 padding-left: 0.625rem;
 font-size: 1.25rem;
 font-weight: 600;
 color: var(--body-text-color);
 font-family: var(--font-family-main);
 font-weight: var(--font-weight-main);
}

#TableOfContents {
 padding-left: 0;
}

#TableOfContents ul {
 list-style-type: none;
 padding-left: 1rem;
 margin: 0.25rem 0;
}

#TableOfContents li {
 margin: 0.3rem 0;
}

#TableOfContents ol {
 margin: 0.1rem 0;
}

#TableOfContents a {
 color: var(--body-text-color);
 text-decoration: none;
 transition: color 80ms;
 display: block;
 padding: 0.2rem 0;
 text-underline-offset: 4px;
}

#TableOfContents a:hover {
 color: color-mix(in lab, var(--primary-color) 60%, #fff 40%);
 padding-left: 0.3rem;
}

#TableOfContents a.active {
 color: var(--primary-color);
 font-weight: 500;
 text-decoration: underline;
}
&lt;/style&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://markdown.com.cn/"&gt;Markdown&lt;/a&gt; :Markdown 是一种轻量级标记语言，它允许人们使用易读易写的纯文本格式编写文档，Markdown文件的后缀名便是“.md”.&lt;/li&gt;
&lt;li&gt;&lt;a href="https://roadmap.sh/"&gt;roadmap.sh&lt;/a&gt; :roadmap.sh is a community effort to create roadmaps, guides and other educational content to help guide developers in picking up a path and guide their learnings.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="programming-language-learning"&gt;Programming Language Learning&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://go.dev/doc/effective_go"&gt;Effective Go&lt;/a&gt; :Effective Go 是 Go 语言的官方文档，它包含了 Go 语言的基础知识、编码规范、性能优化技巧等.&lt;/li&gt;
&lt;li&gt;&lt;a href="https://draven.co/golang/"&gt;Go语言设计与实现&lt;/a&gt; :详细解释Go语言的编译原理、运行时、基础知识和进阶知识.&lt;/li&gt;
&lt;li&gt;&lt;a href="https://tonybai.com/"&gt;Go/tonybai&lt;/a&gt; :Go语言博客，由Tony Bai创作.&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.yuque.com/aceld/npyr8s"&gt;Go/aceid - 轻量级并发服务框架zinx&lt;/a&gt; :通过Zinx框架来了解基于Golang编写一个TCP服务器的整体轮廓&lt;/li&gt;
&lt;li&gt;&lt;a href="https://developer.mozilla.org/zh-CN/"&gt;MDN Web Docs&lt;/a&gt; :MDN Web Docs 是 Mozilla 开发的一个免费的、开放的、跨平台的 Web 文档项目，它包含了 Web 技术的所有文档，包括 HTML、CSS、JavaScript 等.&lt;/li&gt;
&lt;li&gt;&lt;a href="https://kaisery.github.io/trpl-zh-cn/"&gt;Rust/trpl-zh-cn&lt;/a&gt; :The Rust Programming Language 中文翻译.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="website"&gt;Website&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://gohugo.io/"&gt;hugo&lt;/a&gt; :Hugo is one of the most popular open-source static site generators. With its amazing speed and flexibility, Hugo makes building websites fun again.&lt;/li&gt;
&lt;li&gt;&lt;a href="https://uiverse.io/"&gt;uiverse&lt;/a&gt; :The Largest Library of Open-Source UI&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="github-repository"&gt;Github Repository&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/codecrafters-io/build-your-own-x"&gt;github/build-your-owm-x&lt;/a&gt; :This repository is a compilation of well-written, step-by-step guides for re-creating our favorite technologies from scratch.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="tool"&gt;Tool&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://photokit.com/colors/eyedropper/?lang=zh"&gt;eyedropper&lt;/a&gt; :eyedropper是一个颜色选择器，单击颜色吸管按钮并在屏幕上的任意位置选择一种颜色.&lt;/li&gt;
&lt;li&gt;&lt;a href="https://convertio.co/zh/"&gt;convertio&lt;/a&gt; :convertio是一个免费的文件转换工具，支持多种文件格式之间的转换，如PDF、图片、视频、音频等。&lt;/li&gt;
&lt;/ul&gt;</description></item><item><title>Search</title><link>https://dangpangch.github.io/search/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://dangpangch.github.io/search/</guid><description>&lt;h1 id="search"&gt;Search&lt;/h1&gt;
&lt;p&gt;Here you can search for indexable pages, like posts and alike. There&amp;rsquo;s also support for URL param &amp;ldquo;q&amp;rdquo; which then auto searches upon page load event.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;你可以在此处搜索可索引的页面，例如帖子等内容。该功能还支持 URL 参数 &amp;ldquo;q&amp;rdquo;，在页面加载时会自动根据该参数进行搜索。&lt;/p&gt;&lt;/blockquote&gt;
&lt;p class="hidden"&gt;&lt;/p&gt;
&lt;p class="search-loading hidden"&gt;加载中...&lt;/p&gt;

&lt;form id="search-form" class="search-form" action="#" method="post" accept-charset="UTF-8" role="search"&gt;
 &lt;div class="search-bar"&gt;
 &lt;label for="query" class="hidden"&gt;搜索...&lt;/label&gt;
 &lt;input id="query" class="search-text" type="text" placeholder="Search or Ctrl&amp;#43;/"/&gt;
 &lt;/div&gt;
&lt;/form&gt;

&lt;div class="search-results"&gt;&lt;/div&gt;

&lt;template&gt;
 &lt;article class="search-result list-view"&gt;
 &lt;header&gt;
 &lt;h2 class="title"&gt;&lt;a href="#"&gt;&lt;/a&gt;&lt;/h2&gt;
 &lt;div class="submitted"&gt;
 &lt;time class="created-date"&gt;&lt;/time&gt;
 &lt;/div&gt;
 &lt;/header&gt;
 &lt;p class="content"&gt;&lt;/p&gt;
 &lt;/article&gt;
&lt;/template&gt;</description></item></channel></rss>